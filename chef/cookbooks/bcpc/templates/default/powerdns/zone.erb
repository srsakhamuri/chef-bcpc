$ORIGIN <%= node['bcpc']['cloud']['domain'] %>.
$TTL 3600

@ IN SOA ns1.<%= node['bcpc']['cloud']['domain'] %>. <%= @email %>. (
    <%= @serial %> ; serial
    3559 ; refresh
    600 ; retry
    86400 ; expire
    3600 ; minimum
)

@ IN NS ns1.<%= node['bcpc']['cloud']['domain'] %>.

<% @networks.each do |network| %>
  <% %w[fixed float].each do |type| %>
    <% network.fetch(type, []).each do |subnet| %>
      <% subnet['allocation'].each_host do |ip| %>
<%= subnet['dns']['hostname_prefix'] %>-<%= ip.octets.join('-') %> IN A <%= ip %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
